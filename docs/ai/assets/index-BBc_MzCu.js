(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:Vn,setPrototypeOf:Mn,isFrozen:Pr,getPrototypeOf:$r,getOwnPropertyDescriptor:zr}=Object;let{freeze:z,seal:G,create:Jn}=Object,{apply:Pt,construct:$t}=typeof Reflect<"u"&&Reflect;z||(z=function(t){return t});G||(G=function(t){return t});Pt||(Pt=function(t,n,r){return t.apply(n,r)});$t||($t=function(t,n){return new t(...n)});const Ke=B(Array.prototype.forEach),Br=B(Array.prototype.lastIndexOf),Dn=B(Array.prototype.pop),ye=B(Array.prototype.push),Ur=B(Array.prototype.splice),et=B(String.prototype.toLowerCase),Lt=B(String.prototype.toString),Pn=B(String.prototype.match),Se=B(String.prototype.replace),Hr=B(String.prototype.indexOf),Fr=B(String.prototype.trim),q=B(Object.prototype.hasOwnProperty),P=B(RegExp.prototype.test),Re=Gr(TypeError);function B(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return Pt(e,t,r)}}function Gr(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return $t(e,n)}}function m(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:et;Mn&&Mn(e,null);let r=t.length;for(;r--;){let s=t[r];if(typeof s=="string"){const a=n(s);a!==s&&(Pr(t)||(t[r]=a),s=a)}e[s]=!0}return e}function qr(e){for(let t=0;t<e.length;t++)q(e,t)||(e[t]=null);return e}function Q(e){const t=Jn(null);for(const[n,r]of Vn(e))q(e,n)&&(Array.isArray(r)?t[n]=qr(r):r&&typeof r=="object"&&r.constructor===Object?t[n]=Q(r):t[n]=r);return t}function Le(e,t){for(;e!==null;){const r=zr(e,t);if(r){if(r.get)return B(r.get);if(typeof r.value=="function")return B(r.value)}e=$r(e)}function n(){return null}return n}const $n=z(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),It=z(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ct=z(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Wr=z(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Ot=z(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Yr=z(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),zn=z(["#text"]),Bn=z(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),vt=z(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Un=z(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Xe=z(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Zr=G(/\{\{[\w\W]*|[\w\W]*\}\}/gm),jr=G(/<%[\w\W]*|[\w\W]*%>/gm),Kr=G(/\$\{[\w\W]*/gm),Xr=G(/^data-[\-\w.\u00B7-\uFFFF]+$/),Qr=G(/^aria-[\-\w]+$/),er=G(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Vr=G(/^(?:\w+script|data):/i),Jr=G(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),tr=G(/^html$/i),es=G(/^[a-z][.\w]*(-[.\w]+)+$/i);var Hn=Object.freeze({__proto__:null,ARIA_ATTR:Qr,ATTR_WHITESPACE:Jr,CUSTOM_ELEMENT:es,DATA_ATTR:Xr,DOCTYPE_NAME:tr,ERB_EXPR:jr,IS_ALLOWED_URI:er,IS_SCRIPT_OR_DATA:Vr,MUSTACHE_EXPR:Zr,TMPLIT_EXPR:Kr});const Ie={element:1,text:3,progressingInstruction:7,comment:8,document:9},ts=function(){return typeof window>"u"?null:window},ns=function(t,n){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let r=null;const s="data-tt-policy-suffix";n&&n.hasAttribute(s)&&(r=n.getAttribute(s));const a="dompurify"+(r?"#"+r:"");try{return t.createPolicy(a,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}},Fn=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function nr(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ts();const t=f=>nr(f);if(t.version="3.2.6",t.removed=[],!e||!e.document||e.document.nodeType!==Ie.document||!e.Element)return t.isSupported=!1,t;let{document:n}=e;const r=n,s=r.currentScript,{DocumentFragment:a,HTMLTemplateElement:o,Node:l,Element:u,NodeFilter:h,NamedNodeMap:g=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:p,DOMParser:k,trustedTypes:S}=e,E=u.prototype,U=Le(E,"cloneNode"),Ue=Le(E,"remove"),xe=Le(E,"nextSibling"),He=Le(E,"childNodes"),re=Le(E,"parentNode");if(typeof o=="function"){const f=n.createElement("template");f.content&&f.content.ownerDocument&&(n=f.content.ownerDocument)}let L,se="";const{implementation:ie,createNodeIterator:ae,createDocumentFragment:Tr,getElementsByTagName:Er}=n,{importNode:wr}=r;let D=Fn();t.isSupported=typeof Vn=="function"&&typeof re=="function"&&ie&&ie.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:gt,ERB_EXPR:pt,TMPLIT_EXPR:mt,DATA_ATTR:Ar,ARIA_ATTR:yr,IS_SCRIPT_OR_DATA:Sr,ATTR_WHITESPACE:cn,CUSTOM_ELEMENT:Rr}=Hn;let{IS_ALLOWED_URI:un}=Hn,I=null;const hn=m({},[...$n,...It,...Ct,...Ot,...zn]);let O=null;const dn=m({},[...Bn,...vt,...Un,...Xe]);let y=Object.seal(Jn(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Te=null,kt=null,fn=!0,bt=!0,gn=!1,pn=!0,he=!1,Fe=!0,oe=!1,_t=!1,xt=!1,de=!1,Ge=!1,qe=!1,mn=!0,kn=!1;const Lr="user-content-";let Tt=!0,Ee=!1,fe={},ge=null;const bn=m({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let _n=null;const xn=m({},["audio","video","img","source","image","track"]);let Et=null;const Tn=m({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),We="http://www.w3.org/1998/Math/MathML",Ye="http://www.w3.org/2000/svg",j="http://www.w3.org/1999/xhtml";let pe=j,wt=!1,At=null;const Ir=m({},[We,Ye,j],Lt);let Ze=m({},["mi","mo","mn","ms","mtext"]),je=m({},["annotation-xml"]);const Cr=m({},["title","style","font","a","script"]);let we=null;const Or=["application/xhtml+xml","text/html"],vr="text/html";let C=null,me=null;const Nr=n.createElement("form"),En=function(i){return i instanceof RegExp||i instanceof Function},yt=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(me&&me===i)){if((!i||typeof i!="object")&&(i={}),i=Q(i),we=Or.indexOf(i.PARSER_MEDIA_TYPE)===-1?vr:i.PARSER_MEDIA_TYPE,C=we==="application/xhtml+xml"?Lt:et,I=q(i,"ALLOWED_TAGS")?m({},i.ALLOWED_TAGS,C):hn,O=q(i,"ALLOWED_ATTR")?m({},i.ALLOWED_ATTR,C):dn,At=q(i,"ALLOWED_NAMESPACES")?m({},i.ALLOWED_NAMESPACES,Lt):Ir,Et=q(i,"ADD_URI_SAFE_ATTR")?m(Q(Tn),i.ADD_URI_SAFE_ATTR,C):Tn,_n=q(i,"ADD_DATA_URI_TAGS")?m(Q(xn),i.ADD_DATA_URI_TAGS,C):xn,ge=q(i,"FORBID_CONTENTS")?m({},i.FORBID_CONTENTS,C):bn,Te=q(i,"FORBID_TAGS")?m({},i.FORBID_TAGS,C):Q({}),kt=q(i,"FORBID_ATTR")?m({},i.FORBID_ATTR,C):Q({}),fe=q(i,"USE_PROFILES")?i.USE_PROFILES:!1,fn=i.ALLOW_ARIA_ATTR!==!1,bt=i.ALLOW_DATA_ATTR!==!1,gn=i.ALLOW_UNKNOWN_PROTOCOLS||!1,pn=i.ALLOW_SELF_CLOSE_IN_ATTR!==!1,he=i.SAFE_FOR_TEMPLATES||!1,Fe=i.SAFE_FOR_XML!==!1,oe=i.WHOLE_DOCUMENT||!1,de=i.RETURN_DOM||!1,Ge=i.RETURN_DOM_FRAGMENT||!1,qe=i.RETURN_TRUSTED_TYPE||!1,xt=i.FORCE_BODY||!1,mn=i.SANITIZE_DOM!==!1,kn=i.SANITIZE_NAMED_PROPS||!1,Tt=i.KEEP_CONTENT!==!1,Ee=i.IN_PLACE||!1,un=i.ALLOWED_URI_REGEXP||er,pe=i.NAMESPACE||j,Ze=i.MATHML_TEXT_INTEGRATION_POINTS||Ze,je=i.HTML_INTEGRATION_POINTS||je,y=i.CUSTOM_ELEMENT_HANDLING||{},i.CUSTOM_ELEMENT_HANDLING&&En(i.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(y.tagNameCheck=i.CUSTOM_ELEMENT_HANDLING.tagNameCheck),i.CUSTOM_ELEMENT_HANDLING&&En(i.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(y.attributeNameCheck=i.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),i.CUSTOM_ELEMENT_HANDLING&&typeof i.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(y.allowCustomizedBuiltInElements=i.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),he&&(bt=!1),Ge&&(de=!0),fe&&(I=m({},zn),O=[],fe.html===!0&&(m(I,$n),m(O,Bn)),fe.svg===!0&&(m(I,It),m(O,vt),m(O,Xe)),fe.svgFilters===!0&&(m(I,Ct),m(O,vt),m(O,Xe)),fe.mathMl===!0&&(m(I,Ot),m(O,Un),m(O,Xe))),i.ADD_TAGS&&(I===hn&&(I=Q(I)),m(I,i.ADD_TAGS,C)),i.ADD_ATTR&&(O===dn&&(O=Q(O)),m(O,i.ADD_ATTR,C)),i.ADD_URI_SAFE_ATTR&&m(Et,i.ADD_URI_SAFE_ATTR,C),i.FORBID_CONTENTS&&(ge===bn&&(ge=Q(ge)),m(ge,i.FORBID_CONTENTS,C)),Tt&&(I["#text"]=!0),oe&&m(I,["html","head","body"]),I.table&&(m(I,["tbody"]),delete Te.tbody),i.TRUSTED_TYPES_POLICY){if(typeof i.TRUSTED_TYPES_POLICY.createHTML!="function")throw Re('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof i.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Re('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');L=i.TRUSTED_TYPES_POLICY,se=L.createHTML("")}else L===void 0&&(L=ns(S,s)),L!==null&&typeof se=="string"&&(se=L.createHTML(""));z&&z(i),me=i}},wn=m({},[...It,...Ct,...Wr]),An=m({},[...Ot,...Yr]),Mr=function(i){let c=re(i);(!c||!c.tagName)&&(c={namespaceURI:pe,tagName:"template"});const d=et(i.tagName),w=et(c.tagName);return At[i.namespaceURI]?i.namespaceURI===Ye?c.namespaceURI===j?d==="svg":c.namespaceURI===We?d==="svg"&&(w==="annotation-xml"||Ze[w]):!!wn[d]:i.namespaceURI===We?c.namespaceURI===j?d==="math":c.namespaceURI===Ye?d==="math"&&je[w]:!!An[d]:i.namespaceURI===j?c.namespaceURI===Ye&&!je[w]||c.namespaceURI===We&&!Ze[w]?!1:!An[d]&&(Cr[d]||!wn[d]):!!(we==="application/xhtml+xml"&&At[i.namespaceURI]):!1},W=function(i){ye(t.removed,{element:i});try{re(i).removeChild(i)}catch{Ue(i)}},ke=function(i,c){try{ye(t.removed,{attribute:c.getAttributeNode(i),from:c})}catch{ye(t.removed,{attribute:null,from:c})}if(c.removeAttribute(i),i==="is")if(de||Ge)try{W(c)}catch{}else try{c.setAttribute(i,"")}catch{}},yn=function(i){let c=null,d=null;if(xt)i="<remove></remove>"+i;else{const R=Pn(i,/^[\r\n\t ]+/);d=R&&R[0]}we==="application/xhtml+xml"&&pe===j&&(i='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+i+"</body></html>");const w=L?L.createHTML(i):i;if(pe===j)try{c=new k().parseFromString(w,we)}catch{}if(!c||!c.documentElement){c=ie.createDocument(pe,"template",null);try{c.documentElement.innerHTML=wt?se:w}catch{}}const N=c.body||c.documentElement;return i&&d&&N.insertBefore(n.createTextNode(d),N.childNodes[0]||null),pe===j?Er.call(c,oe?"html":"body")[0]:oe?c.documentElement:N},Sn=function(i){return ae.call(i.ownerDocument||i,i,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT|h.SHOW_PROCESSING_INSTRUCTION|h.SHOW_CDATA_SECTION,null)},St=function(i){return i instanceof p&&(typeof i.nodeName!="string"||typeof i.textContent!="string"||typeof i.removeChild!="function"||!(i.attributes instanceof g)||typeof i.removeAttribute!="function"||typeof i.setAttribute!="function"||typeof i.namespaceURI!="string"||typeof i.insertBefore!="function"||typeof i.hasChildNodes!="function")},Rn=function(i){return typeof l=="function"&&i instanceof l};function K(f,i,c){Ke(f,d=>{d.call(t,i,c,me)})}const Ln=function(i){let c=null;if(K(D.beforeSanitizeElements,i,null),St(i))return W(i),!0;const d=C(i.nodeName);if(K(D.uponSanitizeElement,i,{tagName:d,allowedTags:I}),Fe&&i.hasChildNodes()&&!Rn(i.firstElementChild)&&P(/<[/\w!]/g,i.innerHTML)&&P(/<[/\w!]/g,i.textContent)||i.nodeType===Ie.progressingInstruction||Fe&&i.nodeType===Ie.comment&&P(/<[/\w]/g,i.data))return W(i),!0;if(!I[d]||Te[d]){if(!Te[d]&&Cn(d)&&(y.tagNameCheck instanceof RegExp&&P(y.tagNameCheck,d)||y.tagNameCheck instanceof Function&&y.tagNameCheck(d)))return!1;if(Tt&&!ge[d]){const w=re(i)||i.parentNode,N=He(i)||i.childNodes;if(N&&w){const R=N.length;for(let H=R-1;H>=0;--H){const X=U(N[H],!0);X.__removalCount=(i.__removalCount||0)+1,w.insertBefore(X,xe(i))}}}return W(i),!0}return i instanceof u&&!Mr(i)||(d==="noscript"||d==="noembed"||d==="noframes")&&P(/<\/no(script|embed|frames)/i,i.innerHTML)?(W(i),!0):(he&&i.nodeType===Ie.text&&(c=i.textContent,Ke([gt,pt,mt],w=>{c=Se(c,w," ")}),i.textContent!==c&&(ye(t.removed,{element:i.cloneNode()}),i.textContent=c)),K(D.afterSanitizeElements,i,null),!1)},In=function(i,c,d){if(mn&&(c==="id"||c==="name")&&(d in n||d in Nr))return!1;if(!(bt&&!kt[c]&&P(Ar,c))){if(!(fn&&P(yr,c))){if(!O[c]||kt[c]){if(!(Cn(i)&&(y.tagNameCheck instanceof RegExp&&P(y.tagNameCheck,i)||y.tagNameCheck instanceof Function&&y.tagNameCheck(i))&&(y.attributeNameCheck instanceof RegExp&&P(y.attributeNameCheck,c)||y.attributeNameCheck instanceof Function&&y.attributeNameCheck(c))||c==="is"&&y.allowCustomizedBuiltInElements&&(y.tagNameCheck instanceof RegExp&&P(y.tagNameCheck,d)||y.tagNameCheck instanceof Function&&y.tagNameCheck(d))))return!1}else if(!Et[c]){if(!P(un,Se(d,cn,""))){if(!((c==="src"||c==="xlink:href"||c==="href")&&i!=="script"&&Hr(d,"data:")===0&&_n[i])){if(!(gn&&!P(Sr,Se(d,cn,"")))){if(d)return!1}}}}}}return!0},Cn=function(i){return i!=="annotation-xml"&&Pn(i,Rr)},On=function(i){K(D.beforeSanitizeAttributes,i,null);const{attributes:c}=i;if(!c||St(i))return;const d={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:O,forceKeepAttr:void 0};let w=c.length;for(;w--;){const N=c[w],{name:R,namespaceURI:H,value:X}=N,Ae=C(R),Rt=X;let M=R==="value"?Rt:Fr(Rt);if(d.attrName=Ae,d.attrValue=M,d.keepAttr=!0,d.forceKeepAttr=void 0,K(D.uponSanitizeAttribute,i,d),M=d.attrValue,kn&&(Ae==="id"||Ae==="name")&&(ke(R,i),M=Lr+M),Fe&&P(/((--!?|])>)|<\/(style|title)/i,M)){ke(R,i);continue}if(d.forceKeepAttr)continue;if(!d.keepAttr){ke(R,i);continue}if(!pn&&P(/\/>/i,M)){ke(R,i);continue}he&&Ke([gt,pt,mt],Nn=>{M=Se(M,Nn," ")});const vn=C(i.nodeName);if(!In(vn,Ae,M)){ke(R,i);continue}if(L&&typeof S=="object"&&typeof S.getAttributeType=="function"&&!H)switch(S.getAttributeType(vn,Ae)){case"TrustedHTML":{M=L.createHTML(M);break}case"TrustedScriptURL":{M=L.createScriptURL(M);break}}if(M!==Rt)try{H?i.setAttributeNS(H,R,M):i.setAttribute(R,M),St(i)?W(i):Dn(t.removed)}catch{ke(R,i)}}K(D.afterSanitizeAttributes,i,null)},Dr=function f(i){let c=null;const d=Sn(i);for(K(D.beforeSanitizeShadowDOM,i,null);c=d.nextNode();)K(D.uponSanitizeShadowNode,c,null),Ln(c),On(c),c.content instanceof a&&f(c.content);K(D.afterSanitizeShadowDOM,i,null)};return t.sanitize=function(f){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=null,d=null,w=null,N=null;if(wt=!f,wt&&(f="<!-->"),typeof f!="string"&&!Rn(f))if(typeof f.toString=="function"){if(f=f.toString(),typeof f!="string")throw Re("dirty is not a string, aborting")}else throw Re("toString is not a function");if(!t.isSupported)return f;if(_t||yt(i),t.removed=[],typeof f=="string"&&(Ee=!1),Ee){if(f.nodeName){const X=C(f.nodeName);if(!I[X]||Te[X])throw Re("root node is forbidden and cannot be sanitized in-place")}}else if(f instanceof l)c=yn("<!---->"),d=c.ownerDocument.importNode(f,!0),d.nodeType===Ie.element&&d.nodeName==="BODY"||d.nodeName==="HTML"?c=d:c.appendChild(d);else{if(!de&&!he&&!oe&&f.indexOf("<")===-1)return L&&qe?L.createHTML(f):f;if(c=yn(f),!c)return de?null:qe?se:""}c&&xt&&W(c.firstChild);const R=Sn(Ee?f:c);for(;w=R.nextNode();)Ln(w),On(w),w.content instanceof a&&Dr(w.content);if(Ee)return f;if(de){if(Ge)for(N=Tr.call(c.ownerDocument);c.firstChild;)N.appendChild(c.firstChild);else N=c;return(O.shadowroot||O.shadowrootmode)&&(N=wr.call(r,N,!0)),N}let H=oe?c.outerHTML:c.innerHTML;return oe&&I["!doctype"]&&c.ownerDocument&&c.ownerDocument.doctype&&c.ownerDocument.doctype.name&&P(tr,c.ownerDocument.doctype.name)&&(H="<!DOCTYPE "+c.ownerDocument.doctype.name+`>
`+H),he&&Ke([gt,pt,mt],X=>{H=Se(H,X," ")}),L&&qe?L.createHTML(H):H},t.setConfig=function(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};yt(f),_t=!0},t.clearConfig=function(){me=null,_t=!1},t.isValidAttribute=function(f,i,c){me||yt({});const d=C(f),w=C(i);return In(d,w,c)},t.addHook=function(f,i){typeof i=="function"&&ye(D[f],i)},t.removeHook=function(f,i){if(i!==void 0){const c=Br(D[f],i);return c===-1?void 0:Ur(D[f],c,1)[0]}return Dn(D[f])},t.removeHooks=function(f){D[f]=[]},t.removeAllHooks=function(){D=Fn()},t}var Gn=nr();function Zt(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var ue=Zt();function rr(e){ue=e}var Pe={exec:()=>null};function _(e,t=""){let n=typeof e=="string"?e:e.source,r={replace:(s,a)=>{let o=typeof a=="string"?a:a.source;return o=o.replace($.caret,"$1"),n=n.replace(s,o),r},getRegex:()=>new RegExp(n,t)};return r}var $={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},rs=/^(?:[ \t]*(?:\n|$))+/,ss=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,is=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Be=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,as=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,jt=/(?:[*+-]|\d{1,9}[.)])/,sr=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,ir=_(sr).replace(/bull/g,jt).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),os=_(sr).replace(/bull/g,jt).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Kt=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,ls=/^[^\n]+/,Xt=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,cs=_(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Xt).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),us=_(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,jt).getRegex(),dt="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Qt=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,hs=_("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Qt).replace("tag",dt).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),ar=_(Kt).replace("hr",Be).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",dt).getRegex(),ds=_(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",ar).getRegex(),Vt={blockquote:ds,code:ss,def:cs,fences:is,heading:as,hr:Be,html:hs,lheading:ir,list:us,newline:rs,paragraph:ar,table:Pe,text:ls},qn=_("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Be).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",dt).getRegex(),fs={...Vt,lheading:os,table:qn,paragraph:_(Kt).replace("hr",Be).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",qn).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",dt).getRegex()},gs={...Vt,html:_(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Qt).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Pe,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:_(Kt).replace("hr",Be).replace("heading",` *#{1,6} *[^
]`).replace("lheading",ir).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},ps=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,ms=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,or=/^( {2,}|\\)\n(?!\s*$)/,ks=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,ft=/[\p{P}\p{S}]/u,Jt=/[\s\p{P}\p{S}]/u,lr=/[^\s\p{P}\p{S}]/u,bs=_(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Jt).getRegex(),cr=/(?!~)[\p{P}\p{S}]/u,_s=/(?!~)[\s\p{P}\p{S}]/u,xs=/(?:[^\s\p{P}\p{S}]|~)/u,Ts=/\[[^\[\]]*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)|`[^`]*?`|<(?! )[^<>]*?>/g,ur=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Es=_(ur,"u").replace(/punct/g,ft).getRegex(),ws=_(ur,"u").replace(/punct/g,cr).getRegex(),hr="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",As=_(hr,"gu").replace(/notPunctSpace/g,lr).replace(/punctSpace/g,Jt).replace(/punct/g,ft).getRegex(),ys=_(hr,"gu").replace(/notPunctSpace/g,xs).replace(/punctSpace/g,_s).replace(/punct/g,cr).getRegex(),Ss=_("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,lr).replace(/punctSpace/g,Jt).replace(/punct/g,ft).getRegex(),Rs=_(/\\(punct)/,"gu").replace(/punct/g,ft).getRegex(),Ls=_(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Is=_(Qt).replace("(?:-->|$)","-->").getRegex(),Cs=_("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Is).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),it=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`[^`]*`|[^\[\]\\`])*?/,Os=_(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",it).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),dr=_(/^!?\[(label)\]\[(ref)\]/).replace("label",it).replace("ref",Xt).getRegex(),fr=_(/^!?\[(ref)\](?:\[\])?/).replace("ref",Xt).getRegex(),vs=_("reflink|nolink(?!\\()","g").replace("reflink",dr).replace("nolink",fr).getRegex(),en={_backpedal:Pe,anyPunctuation:Rs,autolink:Ls,blockSkip:Ts,br:or,code:ms,del:Pe,emStrongLDelim:Es,emStrongRDelimAst:As,emStrongRDelimUnd:Ss,escape:ps,link:Os,nolink:fr,punctuation:bs,reflink:dr,reflinkSearch:vs,tag:Cs,text:ks,url:Pe},Ns={...en,link:_(/^!?\[(label)\]\((.*?)\)/).replace("label",it).getRegex(),reflink:_(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",it).getRegex()},zt={...en,emStrongRDelimAst:ys,emStrongLDelim:ws,url:_(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Ms={...zt,br:_(or).replace("{2,}","*").getRegex(),text:_(zt.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Qe={normal:Vt,gfm:fs,pedantic:gs},Ce={normal:en,gfm:zt,breaks:Ms,pedantic:Ns},Ds={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Wn=e=>Ds[e];function Y(e,t){if(t){if($.escapeTest.test(e))return e.replace($.escapeReplace,Wn)}else if($.escapeTestNoEncode.test(e))return e.replace($.escapeReplaceNoEncode,Wn);return e}function Yn(e){try{e=encodeURI(e).replace($.percentDecode,"%")}catch{return null}return e}function Zn(e,t){let n=e.replace($.findPipe,(a,o,l)=>{let u=!1,h=o;for(;--h>=0&&l[h]==="\\";)u=!u;return u?"|":" |"}),r=n.split($.splitPipe),s=0;if(r[0].trim()||r.shift(),r.length>0&&!r.at(-1)?.trim()&&r.pop(),t)if(r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;s<r.length;s++)r[s]=r[s].trim().replace($.slashPipe,"|");return r}function Oe(e,t,n){let r=e.length;if(r===0)return"";let s=0;for(;s<r&&e.charAt(r-s-1)===t;)s++;return e.slice(0,r-s)}function Ps(e,t){if(e.indexOf(t[1])===-1)return-1;let n=0;for(let r=0;r<e.length;r++)if(e[r]==="\\")r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&(n--,n<0))return r;return n>0?-2:-1}function jn(e,t,n,r,s){let a=t.href,o=t.title||null,l=e[1].replace(s.other.outputLinkReplace,"$1");r.state.inLink=!0;let u={type:e[0].charAt(0)==="!"?"image":"link",raw:n,href:a,title:o,text:l,tokens:r.inlineTokens(l)};return r.state.inLink=!1,u}function $s(e,t,n){let r=e.match(n.other.indentCodeCompensation);if(r===null)return t;let s=r[1];return t.split(`
`).map(a=>{let o=a.match(n.other.beginningSpace);if(o===null)return a;let[l]=o;return l.length>=s.length?a.slice(s.length):a}).join(`
`)}var at=class{options;rules;lexer;constructor(e){this.options=e||ue}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let n=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:Oe(n,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let n=t[0],r=$s(n,t[3]||"",this.rules);return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:r}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(this.rules.other.endingHash.test(n)){let r=Oe(n,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(n=r.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:Oe(t[0],`
`)}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let n=Oe(t[0],`
`).split(`
`),r="",s="",a=[];for(;n.length>0;){let o=!1,l=[],u;for(u=0;u<n.length;u++)if(this.rules.other.blockquoteStart.test(n[u]))l.push(n[u]),o=!0;else if(!o)l.push(n[u]);else break;n=n.slice(u);let h=l.join(`
`),g=h.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${h}`:h,s=s?`${s}
${g}`:g;let p=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(g,a,!0),this.lexer.state.top=p,n.length===0)break;let k=a.at(-1);if(k?.type==="code")break;if(k?.type==="blockquote"){let S=k,E=S.raw+`
`+n.join(`
`),U=this.blockquote(E);a[a.length-1]=U,r=r.substring(0,r.length-S.raw.length)+U.raw,s=s.substring(0,s.length-S.text.length)+U.text;break}else if(k?.type==="list"){let S=k,E=S.raw+`
`+n.join(`
`),U=this.list(E);a[a.length-1]=U,r=r.substring(0,r.length-k.raw.length)+U.raw,s=s.substring(0,s.length-S.raw.length)+U.raw,n=E.substring(a.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:a,text:s}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim(),r=n.length>1,s={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");let a=this.rules.other.listItemRegex(n),o=!1;for(;e;){let u=!1,h="",g="";if(!(t=a.exec(e))||this.rules.block.hr.test(e))break;h=t[0],e=e.substring(h.length);let p=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,xe=>" ".repeat(3*xe.length)),k=e.split(`
`,1)[0],S=!p.trim(),E=0;if(this.options.pedantic?(E=2,g=p.trimStart()):S?E=t[1].length+1:(E=t[2].search(this.rules.other.nonSpaceChar),E=E>4?1:E,g=p.slice(E),E+=t[1].length),S&&this.rules.other.blankLine.test(k)&&(h+=k+`
`,e=e.substring(k.length+1),u=!0),!u){let xe=this.rules.other.nextBulletRegex(E),He=this.rules.other.hrRegex(E),re=this.rules.other.fencesBeginRegex(E),L=this.rules.other.headingBeginRegex(E),se=this.rules.other.htmlBeginRegex(E);for(;e;){let ie=e.split(`
`,1)[0],ae;if(k=ie,this.options.pedantic?(k=k.replace(this.rules.other.listReplaceNesting,"  "),ae=k):ae=k.replace(this.rules.other.tabCharGlobal,"    "),re.test(k)||L.test(k)||se.test(k)||xe.test(k)||He.test(k))break;if(ae.search(this.rules.other.nonSpaceChar)>=E||!k.trim())g+=`
`+ae.slice(E);else{if(S||p.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||re.test(p)||L.test(p)||He.test(p))break;g+=`
`+k}!S&&!k.trim()&&(S=!0),h+=ie+`
`,e=e.substring(ie.length+1),p=ae.slice(E)}}s.loose||(o?s.loose=!0:this.rules.other.doubleBlankLine.test(h)&&(o=!0));let U=null,Ue;this.options.gfm&&(U=this.rules.other.listIsTask.exec(g),U&&(Ue=U[0]!=="[ ] ",g=g.replace(this.rules.other.listReplaceTask,""))),s.items.push({type:"list_item",raw:h,task:!!U,checked:Ue,loose:!1,text:g,tokens:[]}),s.raw+=h}let l=s.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;s.raw=s.raw.trimEnd();for(let u=0;u<s.items.length;u++)if(this.lexer.state.top=!1,s.items[u].tokens=this.lexer.blockTokens(s.items[u].text,[]),!s.loose){let h=s.items[u].tokens.filter(p=>p.type==="space"),g=h.length>0&&h.some(p=>this.rules.other.anyLine.test(p.raw));s.loose=g}if(s.loose)for(let u=0;u<s.items.length;u++)s.items[u].loose=!0;return s}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let n=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:r,title:s}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let n=Zn(t[1]),r=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),s=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],a={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===r.length){for(let o of r)this.rules.other.tableAlignRight.test(o)?a.align.push("right"):this.rules.other.tableAlignCenter.test(o)?a.align.push("center"):this.rules.other.tableAlignLeft.test(o)?a.align.push("left"):a.align.push(null);for(let o=0;o<n.length;o++)a.header.push({text:n[o],tokens:this.lexer.inline(n[o]),header:!0,align:a.align[o]});for(let o of s)a.rows.push(Zn(o,a.header.length).map((l,u)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:a.align[u]})));return a}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let n=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let n=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;let a=Oe(n.slice(0,-1),"\\");if((n.length-a.length)%2===0)return}else{let a=Ps(t[2],"()");if(a===-2)return;if(a>-1){let o=(t[0].indexOf("!")===0?5:4)+t[1].length+a;t[2]=t[2].substring(0,a),t[0]=t[0].substring(0,o).trim(),t[3]=""}}let r=t[2],s="";if(this.options.pedantic){let a=this.rules.other.pedanticHrefTitle.exec(r);a&&(r=a[1],s=a[3])}else s=t[3]?t[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?r=r.slice(1):r=r.slice(1,-1)),jn(t,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let r=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),s=t[r.toLowerCase()];if(!s){let a=n[0].charAt(0);return{type:"text",raw:a,text:a}}return jn(n,s,n[0],this.lexer,this.rules)}}emStrong(e,t,n=""){let r=this.rules.inline.emStrongLDelim.exec(e);if(!(!r||r[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!(r[1]||r[2])||!n||this.rules.inline.punctuation.exec(n))){let s=[...r[0]].length-1,a,o,l=s,u=0,h=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,t=t.slice(-1*e.length+s);(r=h.exec(t))!=null;){if(a=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!a)continue;if(o=[...a].length,r[3]||r[4]){l+=o;continue}else if((r[5]||r[6])&&s%3&&!((s+o)%3)){u+=o;continue}if(l-=o,l>0)continue;o=Math.min(o,o+l+u);let g=[...r[0]][0].length,p=e.slice(0,s+r.index+g+o);if(Math.min(s,o)%2){let S=p.slice(1,-1);return{type:"em",raw:p,text:S,tokens:this.lexer.inlineTokens(S)}}let k=p.slice(2,-2);return{type:"strong",raw:p,text:k,tokens:this.lexer.inlineTokens(k)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(this.rules.other.newLineCharGlobal," "),r=this.rules.other.nonSpaceChar.test(n),s=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return r&&s&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:t[0],text:n}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let n,r;return t[2]==="@"?(n=t[1],r="mailto:"+n):(n=t[1],r=n),{type:"link",raw:t[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let n,r;if(t[2]==="@")n=t[0],r="mailto:"+n;else{let s;do s=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(s!==t[0]);n=t[0],t[1]==="www."?r="http://"+t[0]:r=t[0]}return{type:"link",raw:t[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let n=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:n}}}},ee=class Bt{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||ue,this.options.tokenizer=this.options.tokenizer||new at,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let n={other:$,block:Qe.normal,inline:Ce.normal};this.options.pedantic?(n.block=Qe.pedantic,n.inline=Ce.pedantic):this.options.gfm&&(n.block=Qe.gfm,this.options.breaks?n.inline=Ce.breaks:n.inline=Ce.gfm),this.tokenizer.rules=n}static get rules(){return{block:Qe,inline:Ce}}static lex(t,n){return new Bt(n).lex(t)}static lexInline(t,n){return new Bt(n).inlineTokens(t)}lex(t){t=t.replace($.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){let r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,n=[],r=!1){for(this.options.pedantic&&(t=t.replace($.tabCharGlobal,"    ").replace($.spaceLine,""));t;){let s;if(this.options.extensions?.block?.some(o=>(s=o.call({lexer:this},t,n))?(t=t.substring(s.raw.length),n.push(s),!0):!1))continue;if(s=this.tokenizer.space(t)){t=t.substring(s.raw.length);let o=n.at(-1);s.raw.length===1&&o!==void 0?o.raw+=`
`:n.push(s);continue}if(s=this.tokenizer.code(t)){t=t.substring(s.raw.length);let o=n.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+s.raw,o.text+=`
`+s.text,this.inlineQueue.at(-1).src=o.text):n.push(s);continue}if(s=this.tokenizer.fences(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.heading(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.hr(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.blockquote(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.list(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.html(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.def(t)){t=t.substring(s.raw.length);let o=n.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+s.raw,o.text+=`
`+s.raw,this.inlineQueue.at(-1).src=o.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title},n.push(s));continue}if(s=this.tokenizer.table(t)){t=t.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.lheading(t)){t=t.substring(s.raw.length),n.push(s);continue}let a=t;if(this.options.extensions?.startBlock){let o=1/0,l=t.slice(1),u;this.options.extensions.startBlock.forEach(h=>{u=h.call({lexer:this},l),typeof u=="number"&&u>=0&&(o=Math.min(o,u))}),o<1/0&&o>=0&&(a=t.substring(0,o+1))}if(this.state.top&&(s=this.tokenizer.paragraph(a))){let o=n.at(-1);r&&o?.type==="paragraph"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+s.raw,o.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):n.push(s),r=a.length!==t.length,t=t.substring(s.raw.length);continue}if(s=this.tokenizer.text(t)){t=t.substring(s.raw.length);let o=n.at(-1);o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+s.raw,o.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):n.push(s);continue}if(t){let o="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){let r=t,s=null;if(this.tokens.links){let l=Object.keys(this.tokens.links);if(l.length>0)for(;(s=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)l.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(s=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,s.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(s=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let a=!1,o="";for(;t;){a||(o=""),a=!1;let l;if(this.options.extensions?.inline?.some(h=>(l=h.call({lexer:this},t,n))?(t=t.substring(l.raw.length),n.push(l),!0):!1))continue;if(l=this.tokenizer.escape(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.tag(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.link(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(l.raw.length);let h=n.at(-1);l.type==="text"&&h?.type==="text"?(h.raw+=l.raw,h.text+=l.text):n.push(l);continue}if(l=this.tokenizer.emStrong(t,r,o)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.codespan(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.br(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.del(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.autolink(t)){t=t.substring(l.raw.length),n.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(t))){t=t.substring(l.raw.length),n.push(l);continue}let u=t;if(this.options.extensions?.startInline){let h=1/0,g=t.slice(1),p;this.options.extensions.startInline.forEach(k=>{p=k.call({lexer:this},g),typeof p=="number"&&p>=0&&(h=Math.min(h,p))}),h<1/0&&h>=0&&(u=t.substring(0,h+1))}if(l=this.tokenizer.inlineText(u)){t=t.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(o=l.raw.slice(-1)),a=!0;let h=n.at(-1);h?.type==="text"?(h.raw+=l.raw,h.text+=l.text):n.push(l);continue}if(t){let h="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return n}},ot=class{options;parser;constructor(e){this.options=e||ue}space(e){return""}code({text:e,lang:t,escaped:n}){let r=(t||"").match($.notSpaceStart)?.[0],s=e.replace($.endingNewline,"")+`
`;return r?'<pre><code class="language-'+Y(r)+'">'+(n?s:Y(s,!0))+`</code></pre>
`:"<pre><code>"+(n?s:Y(s,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}def(e){return""}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){let t=e.ordered,n=e.start,r="";for(let o=0;o<e.items.length;o++){let l=e.items[o];r+=this.listitem(l)}let s=t?"ol":"ul",a=t&&n!==1?' start="'+n+'"':"";return"<"+s+a+`>
`+r+"</"+s+`>
`}listitem(e){let t="";if(e.task){let n=this.checkbox({checked:!!e.checked});e.loose?e.tokens[0]?.type==="paragraph"?(e.tokens[0].text=n+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=n+" "+Y(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:n+" ",text:n+" ",escaped:!0}):t+=n+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",n="";for(let s=0;s<e.header.length;s++)n+=this.tablecell(e.header[s]);t+=this.tablerow({text:n});let r="";for(let s=0;s<e.rows.length;s++){let a=e.rows[s];n="";for(let o=0;o<a.length;o++)n+=this.tablecell(a[o]);r+=this.tablerow({text:n})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+r+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${Y(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){let r=this.parser.parseInline(n),s=Yn(e);if(s===null)return r;e=s;let a='<a href="'+e+'"';return t&&(a+=' title="'+Y(t)+'"'),a+=">"+r+"</a>",a}image({href:e,title:t,text:n,tokens:r}){r&&(n=this.parser.parseInline(r,this.parser.textRenderer));let s=Yn(e);if(s===null)return Y(n);e=s;let a=`<img src="${e}" alt="${n}"`;return t&&(a+=` title="${Y(t)}"`),a+=">",a}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:Y(e.text)}},tn=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},te=class Ut{options;renderer;textRenderer;constructor(t){this.options=t||ue,this.options.renderer=this.options.renderer||new ot,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new tn}static parse(t,n){return new Ut(n).parse(t)}static parseInline(t,n){return new Ut(n).parseInline(t)}parse(t,n=!0){let r="";for(let s=0;s<t.length;s++){let a=t[s];if(this.options.extensions?.renderers?.[a.type]){let l=a,u=this.options.extensions.renderers[l.type].call({parser:this},l);if(u!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(l.type)){r+=u||"";continue}}let o=a;switch(o.type){case"space":{r+=this.renderer.space(o);continue}case"hr":{r+=this.renderer.hr(o);continue}case"heading":{r+=this.renderer.heading(o);continue}case"code":{r+=this.renderer.code(o);continue}case"table":{r+=this.renderer.table(o);continue}case"blockquote":{r+=this.renderer.blockquote(o);continue}case"list":{r+=this.renderer.list(o);continue}case"html":{r+=this.renderer.html(o);continue}case"def":{r+=this.renderer.def(o);continue}case"paragraph":{r+=this.renderer.paragraph(o);continue}case"text":{let l=o,u=this.renderer.text(l);for(;s+1<t.length&&t[s+1].type==="text";)l=t[++s],u+=`
`+this.renderer.text(l);n?r+=this.renderer.paragraph({type:"paragraph",raw:u,text:u,tokens:[{type:"text",raw:u,text:u,escaped:!0}]}):r+=u;continue}default:{let l='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return r}parseInline(t,n=this.renderer){let r="";for(let s=0;s<t.length;s++){let a=t[s];if(this.options.extensions?.renderers?.[a.type]){let l=this.options.extensions.renderers[a.type].call({parser:this},a);if(l!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){r+=l||"";continue}}let o=a;switch(o.type){case"escape":{r+=n.text(o);break}case"html":{r+=n.html(o);break}case"link":{r+=n.link(o);break}case"image":{r+=n.image(o);break}case"strong":{r+=n.strong(o);break}case"em":{r+=n.em(o);break}case"codespan":{r+=n.codespan(o);break}case"br":{r+=n.br(o);break}case"del":{r+=n.del(o);break}case"text":{r+=n.text(o);break}default:{let l='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return r}},tt=class{options;block;constructor(e){this.options=e||ue}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?ee.lex:ee.lexInline}provideParser(){return this.block?te.parse:te.parseInline}},zs=class{defaults=Zt();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=te;Renderer=ot;TextRenderer=tn;Lexer=ee;Tokenizer=at;Hooks=tt;constructor(...e){this.use(...e)}walkTokens(e,t){let n=[];for(let r of e)switch(n=n.concat(t.call(this,r)),r.type){case"table":{let s=r;for(let a of s.header)n=n.concat(this.walkTokens(a.tokens,t));for(let a of s.rows)for(let o of a)n=n.concat(this.walkTokens(o.tokens,t));break}case"list":{let s=r;n=n.concat(this.walkTokens(s.items,t));break}default:{let s=r;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(a=>{let o=s[a].flat(1/0);n=n.concat(this.walkTokens(o,t))}):s.tokens&&(n=n.concat(this.walkTokens(s.tokens,t)))}}return n}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(n=>{let r={...n};if(r.async=this.defaults.async||r.async||!1,n.extensions&&(n.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){let a=t.renderers[s.name];a?t.renderers[s.name]=function(...o){let l=s.renderer.apply(this,o);return l===!1&&(l=a.apply(this,o)),l}:t.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let a=t[s.level];a?a.unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&(s.level==="block"?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:s.level==="inline"&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(t.childTokens[s.name]=s.childTokens)}),r.extensions=t),n.renderer){let s=this.defaults.renderer||new ot(this.defaults);for(let a in n.renderer){if(!(a in s))throw new Error(`renderer '${a}' does not exist`);if(["options","parser"].includes(a))continue;let o=a,l=n.renderer[o],u=s[o];s[o]=(...h)=>{let g=l.apply(s,h);return g===!1&&(g=u.apply(s,h)),g||""}}r.renderer=s}if(n.tokenizer){let s=this.defaults.tokenizer||new at(this.defaults);for(let a in n.tokenizer){if(!(a in s))throw new Error(`tokenizer '${a}' does not exist`);if(["options","rules","lexer"].includes(a))continue;let o=a,l=n.tokenizer[o],u=s[o];s[o]=(...h)=>{let g=l.apply(s,h);return g===!1&&(g=u.apply(s,h)),g}}r.tokenizer=s}if(n.hooks){let s=this.defaults.hooks||new tt;for(let a in n.hooks){if(!(a in s))throw new Error(`hook '${a}' does not exist`);if(["options","block"].includes(a))continue;let o=a,l=n.hooks[o],u=s[o];tt.passThroughHooks.has(a)?s[o]=h=>{if(this.defaults.async)return Promise.resolve(l.call(s,h)).then(p=>u.call(s,p));let g=l.call(s,h);return u.call(s,g)}:s[o]=(...h)=>{let g=l.apply(s,h);return g===!1&&(g=u.apply(s,h)),g}}r.hooks=s}if(n.walkTokens){let s=this.defaults.walkTokens,a=n.walkTokens;r.walkTokens=function(o){let l=[];return l.push(a.call(this,o)),s&&(l=l.concat(s.call(this,o))),l}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return ee.lex(e,t??this.defaults)}parser(e,t){return te.parse(e,t??this.defaults)}parseMarkdown(e){return(t,n)=>{let r={...n},s={...this.defaults,...r},a=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&r.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));s.hooks&&(s.hooks.options=s,s.hooks.block=e);let o=s.hooks?s.hooks.provideLexer():e?ee.lex:ee.lexInline,l=s.hooks?s.hooks.provideParser():e?te.parse:te.parseInline;if(s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(t):t).then(u=>o(u,s)).then(u=>s.hooks?s.hooks.processAllTokens(u):u).then(u=>s.walkTokens?Promise.all(this.walkTokens(u,s.walkTokens)).then(()=>u):u).then(u=>l(u,s)).then(u=>s.hooks?s.hooks.postprocess(u):u).catch(a);try{s.hooks&&(t=s.hooks.preprocess(t));let u=o(t,s);s.hooks&&(u=s.hooks.processAllTokens(u)),s.walkTokens&&this.walkTokens(u,s.walkTokens);let h=l(u,s);return s.hooks&&(h=s.hooks.postprocess(h)),h}catch(u){return a(u)}}}onError(e,t){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let r="<p>An error occurred:</p><pre>"+Y(n.message+"",!0)+"</pre>";return t?Promise.resolve(r):r}if(t)return Promise.reject(n);throw n}}},ce=new zs;function T(e,t){return ce.parse(e,t)}T.options=T.setOptions=function(e){return ce.setOptions(e),T.defaults=ce.defaults,rr(T.defaults),T};T.getDefaults=Zt;T.defaults=ue;T.use=function(...e){return ce.use(...e),T.defaults=ce.defaults,rr(T.defaults),T};T.walkTokens=function(e,t){return ce.walkTokens(e,t)};T.parseInline=ce.parseInline;T.Parser=te;T.parser=te.parse;T.Renderer=ot;T.TextRenderer=tn;T.Lexer=ee;T.lexer=ee.lex;T.Tokenizer=at;T.Hooks=tt;T.parse=T;T.options;T.setOptions;T.use;T.walkTokens;T.parseInline;te.parse;ee.lex;const lt=1,Ht=2,nn=3,rn=4,sn=5,an=6,on=7,ln=8,ct=9,ut=10,Ft=11,nt=12,ve=13,Ne=14,Me=15,De=16,be=17,Gt=18,F=19,$e=20,ne=21,gr=22,ze=23,ht=24,_e=25,pr=26,qt=27,rt=28,st=29,V=30,Z=31,Ve=101,Kn=102,mr=103,Xn=104,Nt=105,Wt=1,kr=2,br=4,_r=8,xr=16;function Bs(e){switch(e){case Wt:return"href";case kr:return"src";case br:return"class";case _r:return"checked";case xr:return"start"}}const Us=e=>{switch(e){case 1:return nn;case 2:return rn;case 3:return sn;case 4:return an;case 5:return on;default:return ln}},Hs=Us,Qn=24;function Fs(e){const t=new Uint32Array(Qn);return t[0]=lt,{renderer:e,text:"",pending:"",tokens:t,len:0,token:lt,fence_end:0,blockquote_idx:0,hr_char:"",hr_chars:0,fence_start:0,spaces:new Uint8Array(Qn),indent:"",indent_len:0,table_state:0}}function b(e){e.text.length!==0&&(console.assert(e.len>0,"Never adding text to root"),e.renderer.add_text(e.renderer.data,e.text),e.text="")}function A(e){console.assert(e.len>0,"No nodes to end"),e.len-=1,e.token=e.tokens[e.len],e.renderer.end_token(e.renderer.data)}function x(e,t){(e.tokens[e.len]===ht||e.tokens[e.len]===ze)&&t!==_e&&A(e),e.len+=1,e.tokens[e.len]=t,e.token=t,e.renderer.add_token(e.renderer.data,t)}function Gs(e,t,n){for(;n<=e.len;){if(e.tokens[n]===t)return n;n+=1}return-1}function le(e,t){for(e.fence_start=0;e.len>t;)A(e)}function Je(e,t){let n=0;for(let r=0;r<=e.len&&(t-=e.spaces[r],!(t<0));r+=1)switch(e.tokens[r]){case ct:case ut:case $e:case _e:n=r;break}for(;e.len>n;)A(e);return t}function Mt(e,t){let n=-1,r=-1;for(let s=e.blockquote_idx+1;s<=e.len;s+=1)if(e.tokens[s]===_e){if(e.indent_len<e.spaces[s]){r=-1;break}r=s}else e.tokens[s]===t&&(n=s);return r===-1?n===-1?(le(e,e.blockquote_idx),x(e,t),!0):(le(e,n),!1):(le(e,r),x(e,t),!0)}function Dt(e,t){x(e,_e),e.spaces[e.len]=e.indent_len+t,J(e),e.token=mr}function J(e){e.indent="",e.indent_len=0,e.pending=""}function Yt(e){switch(e){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return!0;default:return!1}}function qs(e){switch(e){case 32:case 58:case 59:case 41:case 44:case 33:case 46:case 63:case 93:case 10:return!0;default:return!1}}function Ws(e){return Yt(e)||qs(e)}function v(e,t){for(const n of t){if(e.token===Ve){switch(n){case" ":e.indent_len+=1;continue;case"	":e.indent_len+=4;continue}let s=Je(e,e.indent_len);e.indent_len=0,e.token=e.tokens[e.len],s>0&&v(e," ".repeat(s))}const r=e.pending+n;switch(e.token){case ne:case lt:case $e:case ht:case ze:switch(console.assert(e.text.length===0,"Root should not have any text"),e.pending[0]){case void 0:e.pending=n;continue;case" ":console.assert(e.pending.length===1),e.pending=n,e.indent+=" ",e.indent_len+=1;continue;case"	":console.assert(e.pending.length===1),e.pending=n,e.indent+="	",e.indent_len+=4;continue;case`
`:if(console.assert(e.pending.length===1),e.tokens[e.len]===_e&&e.token===ne){A(e),J(e),e.pending=n;continue}le(e,e.blockquote_idx),J(e),e.blockquote_idx=0,e.fence_start=0,e.pending=n;continue;case"#":switch(n){case"#":if(e.pending.length<6){e.pending=r;continue}break;case" ":Je(e,e.indent_len),x(e,Hs(e.pending.length)),J(e);continue}break;case">":{const a=Gs(e,$e,e.blockquote_idx+1);a===-1?(le(e,e.blockquote_idx),e.blockquote_idx+=1,e.fence_start=0,x(e,$e)):e.blockquote_idx=a,J(e),e.pending=n;continue}case"-":case"*":case"_":if(e.hr_chars===0&&(console.assert(e.pending.length===1,"Pending should be one character"),e.hr_chars=1,e.hr_char=e.pending),e.hr_chars>0){switch(n){case e.hr_char:e.hr_chars+=1,e.pending=r;continue;case" ":e.pending=r;continue;case`
`:if(e.hr_chars<3)break;Je(e,e.indent_len),e.renderer.add_token(e.renderer.data,gr),e.renderer.end_token(e.renderer.data),J(e),e.hr_chars=0;continue}e.hr_chars=0}if(e.pending[0]!=="_"&&e.pending[1]===" "){Mt(e,ze),Dt(e,2),v(e,r.slice(2));continue}break;case"`":if(e.pending.length<3){if(n==="`"){e.pending=r,e.fence_start=r.length;continue}e.fence_start=0;break}switch(n){case"`":e.pending.length===e.fence_start?(e.pending=r,e.fence_start=r.length):(x(e,Ht),J(e),e.fence_start=0,v(e,r));continue;case`
`:{Je(e,e.indent_len),x(e,ut),e.pending.length>e.fence_start&&e.renderer.set_attr(e.renderer.data,br,e.pending.slice(e.fence_start)),J(e),e.token=Ve;continue}default:e.pending=r;continue}case"+":if(n!==" ")break;Mt(e,ze),Dt(e,2);continue;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":if(e.pending[e.pending.length-1]==="."){if(n!==" ")break;Mt(e,ht)&&e.pending!=="1."&&e.renderer.set_attr(e.renderer.data,xr,e.pending.slice(0,-1)),Dt(e,e.pending.length+1);continue}else{const a=n.charCodeAt(0);if(a===46||Yt(a)){e.pending=r;continue}}break;case"|":le(e,e.blockquote_idx),x(e,qt),x(e,rt),e.pending="",v(e,n);continue}let s=r;if(e.token===ne)e.token=e.tokens[e.len],e.renderer.add_token(e.renderer.data,ne),e.renderer.end_token(e.renderer.data);else if(e.indent_len>=4){let a=0;for(;a<4;a+=1)if(e.indent[a]==="	"){a=a+1;break}s=e.indent.slice(a)+r,x(e,ct)}else x(e,Ht);J(e),v(e,s);continue;case qt:if(e.table_state===1)switch(n){case"-":case" ":case"|":case":":e.pending=r;continue;case`
`:e.table_state=2,e.pending="";continue;default:A(e),e.table_state=0;break}else switch(e.pending){case"|":x(e,rt),e.pending="",v(e,n);continue;case`
`:A(e),e.pending="",e.table_state=0,v(e,n);continue}break;case rt:switch(e.pending){case"":break;case"|":x(e,st),A(e),e.pending="",v(e,n);continue;case`
`:A(e),e.table_state=Math.min(e.table_state+1,2),e.pending="",v(e,n);continue;default:x(e,st),v(e,n);continue}break;case st:if(e.pending==="|"){b(e),A(e),e.pending="",v(e,n);continue}break;case ct:switch(r){case`
    `:case`
   	`:case`
  	`:case`
 	`:case`
	`:e.text+=`
`,e.pending="";continue;case`
`:case`
 `:case`
  `:case`
   `:e.pending=r;continue;default:e.pending.length!==0?(b(e),A(e),e.pending=n):e.text+=n;continue}case ut:switch(n){case"`":e.pending=r;continue;case`
`:if(r.length===e.fence_start+e.fence_end+1){b(e),A(e),e.pending="",e.fence_start=0,e.fence_end=0,e.token=Ve;continue}e.token=Ve;break;case" ":if(e.pending[0]===`
`){e.pending=r,e.fence_end+=1;continue}break}e.text+=e.pending,e.pending=n,e.fence_end=1;continue;case Ft:switch(n){case"`":r.length===e.fence_start+ +(e.pending[0]===" ")?(b(e),A(e),e.pending="",e.fence_start=0):e.pending=r;continue;case`
`:e.text+=e.pending,e.pending="",e.token=ne,e.blockquote_idx=0,b(e);continue;case" ":e.text+=e.pending,e.pending=n;continue;default:e.text+=r,e.pending="";continue}case mr:switch(e.pending.length){case 0:if(n!=="[")break;e.pending=r;continue;case 1:if(n!==" "&&n!=="x")break;e.pending=r;continue;case 2:if(n!=="]")break;e.pending=r;continue;case 3:if(n!==" ")break;e.renderer.add_token(e.renderer.data,pr),e.pending[1]==="x"&&e.renderer.set_attr(e.renderer.data,_r,""),e.renderer.end_token(e.renderer.data),e.pending=" ";continue}e.token=e.tokens[e.len],e.pending="",v(e,r);continue;case Ne:case Me:{let a="*",o=nt;if(e.token===Me&&(a="_",o=ve),a===e.pending){if(b(e),a===n){A(e),e.pending="";continue}x(e,o),e.pending=n;continue}break}case nt:case ve:{let a="*",o=Ne;switch(e.token===ve&&(a="_",o=Me),e.pending){case a:a===n?e.tokens[e.len-1]===o?e.pending=r:(b(e),x(e,o),e.pending=""):(b(e),A(e),e.pending=n);continue;case a+a:const l=e.token;b(e),A(e),A(e),a!==n?(x(e,l),e.pending=n):e.pending="";continue}break}case De:if(r==="~~"){b(e),A(e),e.pending="";continue}break;case Nt:n===`
`?(b(e),x(e,V),e.pending=""):(e.token=e.tokens[e.len],e.pending[0]==="\\"?e.text+="[":e.text+="$$",e.pending="",v(e,n));continue;case V:if(r==="\\]"||r==="$$"){b(e),A(e),e.pending="";continue}break;case Z:if(r==="\\)"||e.pending[0]==="$"){b(e),A(e),n===")"?e.pending="":e.pending=n;continue}break;case Kn:r==="http://"||r==="https://"?(b(e),x(e,Gt),e.pending=r,e.text=r):"http:/"[e.pending.length]===n||"https:/"[e.pending.length]===n?e.pending=r:(e.token=e.tokens[e.len],v(e,n));continue;case be:case F:if(e.pending==="]"){b(e),n==="("?e.pending=r:(A(e),e.pending=n);continue}if(e.pending[0]==="]"&&e.pending[1]==="("){if(n===")"){const a=e.token===be?Wt:kr,o=e.pending.slice(2);e.renderer.set_attr(e.renderer.data,a,o),A(e),e.pending=""}else e.pending+=n;continue}break;case Gt:n===" "||n===`
`||n==="\\"?(e.renderer.set_attr(e.renderer.data,Wt,e.pending),b(e),A(e),e.pending=n):(e.text+=n,e.pending=r);continue;case Xn:if(r.startsWith("<br")){if(r.length===3||n===" "||n==="/"&&(r.length===4||e.pending[e.pending.length-1]===" ")){e.pending=r;continue}if(n===">"){b(e),e.token=e.tokens[e.len],e.renderer.add_token(e.renderer.data,ne),e.renderer.end_token(e.renderer.data),e.pending="";continue}}e.token=e.tokens[e.len],e.text+="<",e.pending=e.pending.slice(1),v(e,n);continue}switch(e.pending[0]){case"\\":if(e.token===F||e.token===V||e.token===Z)break;switch(n){case"(":b(e),x(e,Z),e.pending="";continue;case"[":e.token=Nt,e.pending=r;continue;case`
`:e.pending=n;continue;default:let s=n.charCodeAt(0);e.pending="",e.text+=Yt(s)||s>=65&&s<=90||s>=97&&s<=122?r:n;continue}case`
`:switch(e.token){case F:case V:case Z:break;case nn:case rn:case sn:case an:case on:case ln:b(e),le(e,e.blockquote_idx),e.blockquote_idx=0,e.pending=n;continue;default:b(e),e.pending=n,e.token=ne,e.blockquote_idx=0;continue}break;case"<":if(e.token!==F&&e.token!==V&&e.token!==Z){b(e),e.pending=r,e.token=Xn;continue}break;case"`":if(e.token===F)break;n==="`"?(e.fence_start+=1,e.pending=r):(e.fence_start+=1,b(e),x(e,Ft),e.text=n===" "||n===`
`?"":n,e.pending="");continue;case"_":case"*":{if(e.token===F||e.token===V||e.token===Z||e.token===Ne)break;let s=nt,a=Ne;const o=e.pending[0];if(o==="_"&&(s=ve,a=Me),e.pending.length===1){if(o===n){e.pending=r;continue}if(n!==" "&&n!==`
`){b(e),x(e,s),e.pending=n;continue}}else{if(o===n){b(e),x(e,a),x(e,s),e.pending="";continue}if(n!==" "&&n!==`
`){b(e),x(e,a),e.pending=n;continue}}break}case"~":if(e.token!==F&&e.token!==De){if(e.pending==="~"){if(n==="~"){e.pending=r;continue}}else if(n!==" "&&n!==`
`){b(e),x(e,De),e.pending=n;continue}}break;case"$":if(e.token!==F&&e.token!==De&&e.pending==="$")if(n==="$"){e.token=Nt,e.pending=r;continue}else{if(Ws(n.charCodeAt(0)))break;b(e),x(e,Z),e.pending=n;continue}break;case"[":if(e.token!==F&&e.token!==be&&e.token!==V&&e.token!==Z&&n!=="]"){b(e),x(e,be),e.pending=n;continue}break;case"!":if(e.token!==F&&n==="["){b(e),x(e,F),e.pending="";continue}break;case" ":if(e.pending.length===1&&n===" ")continue;break}if(e.token!==F&&e.token!==be&&e.token!==V&&e.token!==Z&&n==="h"&&(e.pending===" "||e.pending==="")){e.text+=e.pending,e.pending=n,e.token=Kn;continue}e.text+=e.pending,e.pending=n}b(e)}function Ys(e){return{add_token:Zs,end_token:js,add_text:Ks,set_attr:Xs,data:{nodes:[e,,,,,],index:0}}}function Zs(e,t){let n=e.nodes[e.index],r;switch(t){case lt:return;case $e:r=document.createElement("blockquote");break;case Ht:r=document.createElement("p");break;case ne:r=document.createElement("br");break;case gr:r=document.createElement("hr");break;case nn:r=document.createElement("h1");break;case rn:r=document.createElement("h2");break;case sn:r=document.createElement("h3");break;case an:r=document.createElement("h4");break;case on:r=document.createElement("h5");break;case ln:r=document.createElement("h6");break;case nt:case ve:r=document.createElement("em");break;case Ne:case Me:r=document.createElement("strong");break;case De:r=document.createElement("s");break;case Ft:r=document.createElement("code");break;case Gt:case be:r=document.createElement("a");break;case F:r=document.createElement("img");break;case ze:r=document.createElement("ul");break;case ht:r=document.createElement("ol");break;case _e:r=document.createElement("li");break;case pr:let s=r=document.createElement("input");s.type="checkbox",s.disabled=!0;break;case ct:case ut:n=n.appendChild(document.createElement("pre")),r=document.createElement("code");break;case qt:r=document.createElement("table");break;case rt:switch(n.children.length){case 0:n=n.appendChild(document.createElement("thead"));break;case 1:n=n.appendChild(document.createElement("tbody"));break;default:n=n.children[1]}r=document.createElement("tr");break;case st:r=document.createElement(n.parentElement?.tagName==="THEAD"?"th":"td");break;case V:r=document.createElement("equation-block");break;case Z:r=document.createElement("equation-inline");break}e.nodes[++e.index]=n.appendChild(r)}function js(e){e.index-=1}function Ks(e,t){e.nodes[e.index].appendChild(document.createTextNode(t))}function Xs(e,t,n){e.nodes[e.index].setAttribute(Bs(t),n)}class Qs{state;chatMessages;userInput;submitBtn;newChatBtn;chatForm;constructor(){this.state={messages:[],isWaitingForResponse:!1},this.chatMessages=document.getElementById("chat-messages"),this.userInput=document.getElementById("user-input"),this.submitBtn=document.getElementById("submit-btn"),this.newChatBtn=document.getElementById("new-chat-btn"),this.chatForm=document.getElementById("chat-form"),this.setupEventListeners()}setupEventListeners(){this.chatForm.addEventListener("submit",t=>{t.preventDefault(),this.submitForm()}),this.newChatBtn.addEventListener("click",()=>{this.startNewChat()}),this.userInput.addEventListener("input",()=>{this.submitBtn.disabled=this.userInput.value.trim()===""||this.state.isWaitingForResponse}),this.userInput.addEventListener("keydown",t=>{t.key==="Enter"&&!t.ctrlKey&&!t.altKey&&!t.metaKey&&(t.preventDefault(),this.submitForm())})}submitForm(){this.handleUserSubmit().then(()=>{}).catch(t=>{console.log("Unable to submit user query.",t)})}async handleUserSubmit(){const t=this.userInput.value.trim();if(!(t===""||this.state.isWaitingForResponse)){this.addMessage("user",t),this.userInput.value="",this.state.isWaitingForResponse=!0,this.submitBtn.disabled=!0;try{const n=this.createBotMessagePlaceholder(),r=await this.sendMessageToServer(t);await this.streamBotResponse(r,n)}catch(n){console.error("Error communicating with the server:",n),this.addMessage("bot","Sorry, there was an error processing your request. Please try again later.")}finally{this.state.isWaitingForResponse=!1,this.submitBtn.disabled=!1}}}async sendMessageToServer(t){return fetch("https://king-prawn-app-pgfe5.ondigitalocean.app/stream",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t})})}createBotMessagePlaceholder(){const t=`msg-${Date.now()}`,n=document.createElement("div");return n.id=t,n.className="bot-message rounded-lg p-4 animate-pulse",n.innerHTML=`
            <div class="flex items-start">
                <div class="font-semibold text-gray-700 mr-2">Bot:</div>
                <div class="message-content markdown-content" id="content-${t}">
                    <div class="h-4 bg-gray-200 rounded w-3/4 mb-2"></div>
                    <div class="h-4 bg-gray-200 rounded w-1/2"></div>
                </div>
            </div>
        `,this.chatMessages.appendChild(n),this.scrollToBottom(),t}async streamBotResponse(t,n){if(!t.ok||!t.body)throw new Error(`Server returned ${t.status}: ${t.statusText}`);const r=t.body.getReader(),s=document.getElementById(`content-${n}`),a=document.getElementById(n);if(s&&a){a.classList.remove("animate-pulse"),s.innerHTML="...";try{const o=await this.streamAndDecodeResponseToElement(r,s);o&&(this.scrollToBottom(),this.state.messages.push({role:"bot",content:o}))}catch(o){console.error("Error while streaming response:",o),s.innerHTML="Error receiving response from server."}}}async streamAndDecodeResponseToElement(t,n){let r="";const s=new TextDecoder,a=Ys(n),o=Fs(a);for(;;){const{done:l,value:u}=await t.read();if(l)return r;const h=s.decode(u),g=Js(h);if(Array.isArray(g))for(const p of g)if(p.event==="data"&&p.data!==void 0){if(p.data?.error)return console.error("Error event found in stream:",p.data),this.displayErrorMessage("There was an error returned by the chatbot. Please try again later.",n),"";{const k=p.data?.content||p.data?.message||p.data;console.log("found content: ",k),r.length<=0||r=="..."?n.innerHTML="":v(o,`
`),this.containsOnlyNumbers(k)?n.innerHTML+=k:v(o,k.toString()),r+=`
`+k}}else{if(p.event==="error")return console.error("Error event found in stream:",p.data),this.displayErrorMessage("There was an error returned by the chatbot. Please try again later.",n),"";if(p.event==="end")return r}if(g instanceof Error)return console.error("Error fetching stream:",g),"There was an error fetching the response. Please try again later."}}containsOnlyNumbers(t){return/^\d+$/.test(t)}displayErrorMessage(t,n){n.innerHTML="<span color='red'>"+t+"</span>"}addMessage(t,n){this.state.messages.push({role:t,content:n});const r=document.createElement("div");if(r.className=t==="user"?"user-message rounded-lg p-4":"bot-message rounded-lg p-4",t==="user"){const s=Gn.sanitize(n);r.innerHTML=`
                <div class="flex items-start">
                    <div class="font-semibold text-blue-600 mr-2">You:</div>
                    <div class="message-content">${s}</div>
                </div>
            `}else{const s=Gn.sanitize(T.parse(n));r.innerHTML=`
                <div class="flex items-start">
                    <div class="font-semibold text-gray-700 mr-2">Bot:</div>
                    <div class="message-content markdown-content">${s}</div>
                </div>
            `}this.chatMessages.appendChild(r),this.scrollToBottom()}scrollToBottom(){this.chatMessages.scrollTop=this.chatMessages.scrollHeight}startNewChat(){this.state.messages=[],this.state.isWaitingForResponse=!1,this.chatMessages.innerHTML="",this.userInput.value="",this.submitBtn.disabled=!1}}const Vs=e=>{const n=/^event:\s+(?<event>[\w]+)((\r?)\n(\r?)data: (?<data>(.|\n)*))?/gm.exec(e);if(!n)return;const{event:r,data:s}=n.groups||{};if(r&&!(r!=="data"&&r!=="end"&&r!=="error"))try{const a=s?JSON.parse(s):void 0;return{event:r,data:a}}catch{return{event:r,data:void 0}}},Js=e=>{if(!e)return[];const t=new RegExp("(((?<=^)|(?<=\\n))event:\\s+(\\w+))","g"),n=[];let r=t.exec(e);for(;r;)n.push(r.index),r=t.exec(e);const s=(a,o)=>{const l=n[o+1]||e.length;return e.substring(a,l)};try{return n.map(s).map(Vs).filter(a=>a!==void 0).map(a=>a)}catch(a){return a instanceof Error?a:[]}};document.addEventListener("DOMContentLoaded",()=>{new Qs});
